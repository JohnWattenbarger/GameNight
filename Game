import pygame, sys
from pygame.locals import *

pygame.init()

# Set up screen
WIDTH = 800
HEIGHT = 600
screen = pygame.display.set_mode((WIDTH, HEIGHT))

# Setup player
playerWidth = 50
playerHeight = 50

playerX = WIDTH//2
playerY = HEIGHT - 2*playerHeight

playerColor = (245, 50, 50)
playerSpeed = 8

# Setup enemies
enemyColumns = 8
enemyRows = 3

enemyWidth = WIDTH / (enemyColumns+2)
enemyHeight = playerHeight

enemySpeed = 5
enemyColor = (50, 250, 50)

class Enemy():
    def __init__(self, x, y, width, height, speed, color):
        self.x = x
        self.y = y
        self.width = width
        self.height = height
        self.speed = speed
        self.color = color

        self.rect = (x, y, width, height)

# create list of enemies
enemies = []

for col in range(0, enemyColumns):
    for row in range(0, enemyRows):
        enemies.append(Enemy(col*enemyWidth + col*10, row*enemyHeight + row*10, enemyWidth, enemyHeight, enemySpeed, enemyColor))



# key presses
keyLeft = False
keyRight = False

# clock
clock = pygame.time.Clock()

gameOver = False

while not gameOver:
    for event in pygame.event.get():
        # test
        print(event)

        if event.type == pygame.QUIT:
            sys.exit()
        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_ESCAPE:
                sys.exit()
            if event.key == pygame.K_LEFT:
                keyLeft = True
            if  event.key == pygame.K_RIGHT:
                keyRight = True
        elif event.type == pygame.KEYUP:
            if event.key == pygame.K_LEFT:
                keyLeft = False
            if  event.key == pygame.K_RIGHT:
                keyRight = False

    #update player position
    if keyLeft and playerX > 0:
        playerX -= playerSpeed
    if keyRight and playerX < WIDTH - playerWidth:
        playerX += playerSpeed

    screen.fill((100, 220, 230))

    # draw player
    pygame.draw.rect(screen, playerColor, (playerX, playerY, playerWidth, playerHeight))

    # draw enemies
    for e in enemies:
        pygame.draw.rect(screen, e.color, e.rect)

    pygame.display.update()

    # wait
    clock.tick(30)